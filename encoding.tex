\section{Encoding and Operations}


We denote by $w$ a finite and non-empty word in $0? \cdot (0\dot 1)^{*} \cdot 1?$. In order to encode signal values that include uncertainty and interleavings, we use the following grammar:

$$
\psi := 0~|~1~|~\psi_1 \cdot \psi_2~|~\psi_1 \triangleleft \psi_2~|~\psi_1 \triangleright \psi_2~|~\psi_1 \diamond \psi_2
$$

We denote by $\Psi$ the set of all formulas that can be generated by the above grammar. We define inductively the semantics for our encoding:

\begin{equation}
\begin{array}{lcl}
\llbracket 0 \rrbracket & = & \{ 0 \} \\
\llbracket 1 \rrbracket & = & \{ 1 \} \\
\llbracket \psi_1 \cdot \psi_2 \rrbracket & = & \{ w_1 \cdot w_2~|~w_1 \in \llbracket \psi_1 \rrbracket \text{ and } w_2 \in \llbracket \psi_2 \rrbracket \} \\
\llbracket \psi_1 \triangleleft \psi_2 \rrbracket & = & \llbracket \psi_1 \rrbracket \; \cup \;  \llbracket \psi_1 \cdot \psi_2 \rrbracket \\
\llbracket \psi_1 \triangleright \psi_2 \rrbracket & = & \llbracket \psi_2 \rrbracket \; \cup \;  \llbracket \psi_1 \cdot \psi_2 \rrbracket \\
\llbracket \psi_1 \diamond \psi_2 \rrbracket & = & \llbracket \psi_1 \triangleleft \psi_2 \rrbracket \; \cup \; \llbracket \psi_1 \triangleright \psi_2 \rrbracket\\
\end{array}
\end{equation}

Let $\omega = (\psi_1, I_1), (\psi_2, I_2), \ldots , (\psi_n, I_n)$ a finite timed signal with uncertainty such that $I_i = [t_i, t_{i+1})$, where $t_1 = 0$ and forall $i \in [0,n)$, $t_{i+1} > t_i$. In every interval $I_i$, the signal can assume value patterns defined by the qualitative word $w \in \llbracket \psi_i \rrbracket$.

\begin{example}
A signal $\omega$ of duration $d$, that has a single rising edge at time $t$ is represented as $(0, [0, t)), (1, [t, d)$. This same signal, interpreted at some other process, assuming a maximal clock skew $\epsilon$ is represented as $(0, [0, t_1)), (0\cdot 1, [t_1, t_2)), (1, [t_2, d))$, where $t_1 = t - \epsilon$ and $t_2 = t + \epsilon$.
\end{example}

The first two operations on $\psi$ that we need are its prefix $\pfx(\psi)$ and suffix $\sfx(\psi)$:
\begin{equation}
\begin{array}{lcl}
\pfx(\psi) & = & \{ w~|~ \exists w' \text{ s.t. } w\cdot w' \in \llbracket \psi \rrbracket \} \\
\sfx(\psi) & = & \{ w~|~ \exists w' \text{ s.t. } w'\cdot w \in \llbracket \psi \rrbracket \} \\
\end{array}
\end{equation}

\begin{example}
 We need the prefix and the suffix operations when we need to split an interval into two intervals and describe what is allowed in each interval. For example, consider the interval $(0\cdot 1, [t_1, t_2))$ from the previous example and a time $t_1 < t' < t_2$ at which we want to split the interval. We now need to describe what are the qualitative patterns that we can observe in $[t_1, t)$ and in $[t', t_2)$. It is not hard to see that in $[t_1, t')$, we can see either $0$ or $0 \cdot 1$, while in $[t_1, t')$ we can see either $0 \cdot 1$ or $1$. It follows that we can represent $(0 \cdot 1, [t_1, t2)$ as $(\pfx(0\cdot 1), [t_1, t')), (\sfx(0 \cdot 1), [t', t_2))$, where $\pfx(0 \cdot 1) = 0 \triangleleft 1$ and $\sfx(0 \cdot 1) = 0 \triangleright 1$. 
\end{example}